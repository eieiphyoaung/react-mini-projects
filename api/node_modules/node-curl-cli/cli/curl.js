#!/usr/bin/env node
/*jshint strict:true node:true es5:true onevar:true laxcomma:true laxbreak:true eqeqeq:true immed:true latedef:true*/
(function () {
  "use strict";

  var request = require('ahr2')
    , fs = require('fs')
    , path = require('path')
    , buf = fs.readFileSync(process.argv[2])
    , url = process.argv[3] || 'http://localhost:80'
    ;

  request.post(url, null, buf).when(function (err, ahr2, data) {
    if (err) {
      throw err;
    }

    if (!data) {
      console.error('no data');
      return;
    }

    console.log(data.toString('utf8'));
  });
}());
